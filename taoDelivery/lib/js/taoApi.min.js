
const URI={'LABEL':'http://www.w3.org/2000/01/rdf-schema#label','ENDORSMENT':'##NAMESPACE#ENDORSMENT','SCORE':'##NAMESPACE#SCORE','SCORE_MIN':'##NAMESPACE#SCORE_MIN','SCORE_MAX':'##NAMESPA
var taoStack=new TaoStack();function getEndorsment(){return taoStack.getTaoVar(URI.ENDORSMENT);}
function setEndorsment(endorsment){taoStack.setTaoVar(URI.ENDORSMENT,(endorsment===true));}
function getScore(){return taoStack.getTaoVar(URI.SCORE);}
function setScore(score){if(isScalar(score)){if(typeof(score)=='boolean'){(score===true)?score=1:score=0;}
taoStack.setTaoVar(URI.SCORE,score);}}
function getScoreRange(){return{'min':taoStack.getTaoVar(URI.SCORE_MIN),'max':taoStack.getTaoVar(URI.SCORE_MAX)};}
function setScoreRange(max,min){if(max!=undefined){if(min==undefined){min=0;}
taoStack.setTaoVar(URI.SCORE_MIN,min);taoStack.setTaoVar(URI.SCORE_MAX,max);}}
function getAnsweredValues(){return taoStack.getTaoVar(URI.LISTNERVALUE);}
function setAnsweredValues(values){taoStack.setTaoVar(URI.LISTNERVALUE,values);}
function getSubject(){return taoStack.getTaoVar(URI.SUBJECT);}
function getSubjectLogin(){var subject=getSubject();return(subject)?subject[URI.SUBJETC_LOGIN]:'';}
function getSubjectName(){var subject=getSubject();if(subject){return subject[URI.SUBJETC_FIRSTNAME]+' '+subject[URI.SUBJETC_LASTNAME];}
return'';}
function getItem(){return taoStack.getTaoVar(URI.ITEM);}
function getTest(){return taoStack.getTaoVar(URI.TEST);}
function getDelivery(){return taoStack.getTaoVar(URI.DELIVERY);}
function setUserVar(key,value){taoStack.setUserVar(key,value);}
function getUserVar(key){return taoStack.getUserVar(key);}
if(typeof(finish)!='function'){function finish(){$(window).trigger(STATE.ITEM.PRE_FINISHED);$(window).trigger(STATE.ITEM.FINISHED);$(window).trigger(STATE.ITEM.POST_FINISHED);}
function onFinish(callback){$(window).bind(STATE.ITEM.FINISHED,callback);}
function beforeFinish(callback){$(window).bind(STATE.ITEM.PRE_FINISHED,callback);}
function afterFinish(callback){$(window).bind(STATE.ITEM.POST_FINISHED,callback);}}
function getToken(){return taoStack.dataStore.token;}
function initDataSource(environment,settings){taoStack.initDataSource(environment,settings,null);}
function initManualDataSource(source){taoStack.initDataSource({type:'manual'},null,source);}
function initPush(environment,settings){taoStack.initPush(environment,settings);}
function push(){taoStack.push();}
beforeFinish(push);var eventTracer=new EventTracer();function logEvent(elementName,eventType,data){eventTracer.feedTrace(elementName,eventType,new Date().getTime(),data);}
function logCustomEvent(eventName,data){eventTracer.feedTrace('BUSINESS',eventName,new Date().getTime(),data);}
function initEventServices(source,destination){extendedParams={params:{token:getToken()}};eventTracer.initSourceService($.extend(true,source,extendedParams));eventTracer.initDestinationService($.extend(true,destination,extendedParams));}
beforeFinish(function(){eventTracer.sendAllFeedTrace_now();});